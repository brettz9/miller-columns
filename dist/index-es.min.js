function e(e,{before:t,after:n,favicon:c,canvas:r,image:s=!0,acceptErrors:a}={}){return e=Array.isArray(e)?e:[e],Promise.all(e.map((e=>function(e){let l,o={};Array.isArray(e)?[l,o={}]=e:l=e;let{favicon:i=c}=o;const{before:d=t,after:u=n,canvas:f=r,image:h=s}=o;function m(){d?d.before(p):u?u.after(p):document.head.append(p)}const p=document.createElement("link");return new Promise(((e,t)=>{let n=t;if(a&&(n="function"==typeof a?n=>{a({error:n,stylesheetURL:l,options:o,resolve:e,reject:t})}:e),l.endsWith(".css")?i=!1:l.endsWith(".ico")&&(i=!0),i){if(p.rel="shortcut icon",p.type="image/x-icon",!1===h)return p.href=l,m(),void e(p);const n=document.createElement("canvas");n.width=16,n.height=16;const c=n.getContext("2d"),r=document.createElement("img");return r.addEventListener("error",(e=>{t(e)})),r.addEventListener("load",(()=>{if(!c)throw new Error("Canvas context could not be found");c.drawImage(r,0,0),p.href=f?n.toDataURL("image/x-icon"):l,m(),e(p)})),void(r.src=l)}p.rel="stylesheet",p.type="text/css",p.href=l,m(),p.addEventListener("error",(e=>{n(e)})),p.addEventListener("load",(()=>{e(p)}))}))}(e))))}
/**
 * MIT License.
 *
 * @copyright 2014 White Magic Software, Inc.
 * @copyright 2018 Brett Zamir
 */const t=new URL("node_modules/miller-columns/src/index.js",location),n=new URL("../miller-columns.css",t).href;async function c(t,{namespace:c="miller",stylesheets:r=["@default"]}={}){let s;const a=`ul:not(.${c}-no-columns),ol:not(.${c}-no-columns)`,l="li";function o(){return t(`.${c}-column > .${c}-selected`)}function i(){const e=t(`.${c}-breadcrumbs`).empty();o().each((function(){const n=t(this);t(`<span class="${c}-breadcrumb">`).text(n.text().trim()).click((function(){n.click()})).appendTo(e)}))}function d(e,n){let r=0;o().not(e).each((function(){r+=t(this).outerWidth(!0)})),n.stop().animate({scrollLeft:r},s.delay,(function(){n.find(`.${c}-column:not(.${c}-collapse)`).last()[0].scrollLeft=r,s.scroll&&s.scroll.call(this,e,n)}))}function u(){t(`.${c}-column:gt(0)`).addClass(`${c}-collapse`)}function f(){return o().last()}function h(e){m(e),function(e){d(null,e)}(e)}function m(e){u(),o().removeClass(`${c}-selected`),i(),s.reset(e),s.preview&&t(`.${c}-preview`).remove()}function p(){f().next().click()}function $(e){let n,r="";return function(s){const{key:a}=s;let o=!1;switch(a){case"Escape":h(e);break;case"ArrowUp":f().prev().click(),o=!0;break;case"ArrowDown":p(),o=!0;break;case"ArrowLeft":!function(){const e=f().data(`${c}-ancestor`);e&&e.click()}(),o=!0;break;case"ArrowRight":!function(){const e=f().data(`${c}-child`);e?e.children(l).first().click():p()}(),o=!0;break;default:if(1===a.length){!function(e){const t=new Date;!n||t-n<500?r+=e:r=e,n=t}(a);e.find(`${l}.${c}-selected`).last().siblings().filter((function(){return new RegExp("^"+(e=r,e.replaceAll(/[-[\]{}()*+?.,\\^$|#\s]/g,String.raw`\$&`)),"i").test(t(this).text().trim());var e})).first().click()}o=!0}o&&0===f().length&&t(`.${c}-column`).first().children().first().click(),o&&s.preventDefault()}}return r&&await e(r.map((e=>"@default"===e?n:e))),t.fn.millerColumns=function(e){const n={current(e){},reset(e){},preview:null,breadcrumb:i,animation:d,delay:500,resetOnOutsideClick:!0};return s=t.extend(n,e),this.each((function(){const e=t(this);!function(e){const n=[];let r;for(n.push(e.children());n.length;)r=n.shift(),r.children(l).each((function(r,s){const l=t(this),o=l.children(a),i=l.parent().parent();i.length&&null==l.data(`${c}-ancestor`)&&t(this).siblings().addBack().data(`${c}-ancestor`,i),o.length&&(n.push(o),t(this).data(`${c}-child`,o).addClass(`${c}-parent`)),t(this).parent(a).appendTo(e).addClass(`${c}-column`)}))}(e),u(),e.find(l).on("click",(function(n){const r=t(this);m(e);const a=r.data(`${c}-child`);let l=r;for(a&&a.removeClass(`${c}-collapse`).children().removeClass(`${c}-selected`);l;)l.addClass(`${c}-selected`).parent().removeClass(`${c}-collapse`),l=l.data(`${c}-ancestor`);if(s.animation.call(this,r,e),s.breadcrumb.call(this),s.current.call(this,r,e),s.preview){if(r.hasClass(`${c}-selected`)&&!r.hasClass(`${c}-parent`)){const t=s.preview.call(this,r,e);r.parent().parent().append(`<ul class="${c}-column ${c}-preview">\n                                <li>${t}</li>\n                            </ul>`)}}n.stopPropagation()})),e.on("keydown",$(e)),e.on("click",(()=>{s.resetOnOutsideClick&&h(e)}))}))},t}export{c as default};
