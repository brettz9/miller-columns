function index(t){let n;const c="ul",e="li";function i(){return t(".column > .selected")}function l(){const n=t("div.breadcrumb").empty();i().each(function(){const c=t(this);t("<span>").text(c.text().trim()).click(function(){c.click()}).appendTo(n)})}function a(c,e){let l=0;i().not(c).each(function(){l+=t(this).outerWidth(!0)}),e.stop().animate({scrollLeft:l},n.delay)}function s(){t(".column:gt(0)").addClass("collapse")}function o(){return i().last()}function r(t){u(t),function(t){a(null,t)}(t)}function u(t){s(),i().removeClass("selected"),l(),n.current(null,t)}function d(){o().next().click()}function h(n){return function(c){let i=!1;switch(c.which){case 27:r(n);break;case 38:o().prev().click(),i=!0;break;case 40:d(),i=!0;break;case 37:!function(){const t=o().data("ancestor");t&&t.click()}(),i=!0;break;case 39:!function(){const t=o().data("child");t?t.children(e).first().click():d()}(),i=!0}i&&0===o().length&&t(".column").first().children().first().click(),i&&c.preventDefault()}}t.fn.millerColumns=function(i){const o={current:t=>{},breadcrumb:l,animation:a,delay:500,resetOnOutsideClick:!0};return n=t.extend(o,i),this.each(function(){const i=t(this);!function(n){const i=[];let l;for(i.push(n.children());i.length;)(l=i.shift()).children(e).each(function(e,l){const a=t(this),s=a.children(c),o=a.parent().parent();o.length&&null==a.data("ancestor")&&t(this).siblings().addBack().data("ancestor",o),s.length&&(i.push(s),t(this).data("child",s).addClass("parent")),t(this).parent(c).appendTo(n).addClass("column")})}(i),s(),i.find(e).on("click",function(c){const e=t(this);u(i);const l=e.data("child");let a=e;for(l&&l.removeClass("collapse").children().removeClass("selected");a;)a.addClass("selected").parent().removeClass("collapse"),a=a.data("ancestor");n.animation.call(this,e,i),n.breadcrumb.call(this),n.current.call(this,e,i),c.stopPropagation()}),i.on("keydown",h(i)),i.on("click",()=>{n.resetOnOutsideClick&&r(i)})})}}export default index;
