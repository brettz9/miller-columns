function index(n){let t;const c="ul:not(.no-columns),ol:not(.no-columns)",e="li";function l(){return n(".column > .selected")}function i(){const t=n("div.breadcrumb").empty();l().each(function(){const c=n(this);n("<span>").text(c.text().trim()).click(function(){c.click()}).appendTo(t)})}function s(c,e){let i=0;l().not(c).each(function(){i+=n(this).outerWidth(!0)}),e.stop().animate({scrollLeft:i},t.delay)}function a(){n(".column:gt(0)").addClass("collapse")}function o(){return l().last()}function r(n){u(n),function(n){s(null,n)}(n)}function u(n){a(),l().removeClass("selected"),i(),t.current(null,n)}function d(){o().next().click()}function h(t){return function(c){let l=!1;switch(c.which){case 27:r(t);break;case 38:o().prev().click(),l=!0;break;case 40:d(),l=!0;break;case 37:!function(){const n=o().data("ancestor");n&&n.click()}(),l=!0;break;case 39:!function(){const n=o().data("child");n?n.children(e).first().click():d()}(),l=!0}l&&0===o().length&&n(".column").first().children().first().click(),l&&c.preventDefault()}}n.fn.millerColumns=function(l){const o={current:n=>{},breadcrumb:i,animation:s,delay:500,resetOnOutsideClick:!0};return t=n.extend(o,l),this.each(function(){const l=n(this);!function(t){const l=[];let i;for(l.push(t.children());l.length;)(i=l.shift()).children(e).each(function(e,i){const s=n(this),a=s.children(c),o=s.parent().parent();o.length&&null==s.data("ancestor")&&n(this).siblings().addBack().data("ancestor",o),a.length&&(l.push(a),n(this).data("child",a).addClass("parent")),n(this).parent(c).appendTo(t).addClass("column")})}(l),a(),l.find(e).on("click",function(c){const e=n(this);u(l);const i=e.data("child");let s=e;for(i&&i.removeClass("collapse").children().removeClass("selected");s;)s.addClass("selected").parent().removeClass("collapse"),s=s.data("ancestor");t.animation.call(this,e,l),t.breadcrumb.call(this),t.current.call(this,e,l),c.stopPropagation()}),l.on("keydown",h(l)),l.on("click",()=>{t.resetOnOutsideClick&&r(l)})})}}export default index;
