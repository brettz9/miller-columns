function loadStylesheets(e,{before:t,after:n,favicon:c,canvas:a,image:s=!0}={}){return e=Array.isArray(e)?e:[e],Promise.all(e.map(function(e){function i(){t?t.before(l):n?n.after(l):document.head.appendChild(l)}const l=document.createElement("link");return new Promise((t,n)=>{if(e.endsWith(".ico")&&(c=!0),c){if(l.rel="shortcut icon",l.type="image/x-icon",!1===s)return l.href=e,i(),void t(l);const c=document.createElement("canvas");c.width=16,c.height=16;const o=c.getContext("2d"),r=document.createElement("img");return r.addEventListener("error",e=>{n(e)}),r.addEventListener("load",()=>{o.drawImage(r,0,0),l.href=a?c.toDataURL("image/x-icon"):e,i(),t(l)}),void(r.src=e)}l.rel="stylesheet",l.type="text/css",l.href=e,i(),l.addEventListener("error",e=>{n(e)}),l.addEventListener("load",()=>{t(l)})})}))}const moduleURL=new URL("node_modules/miller-columns/src/index.js",location),defaultCSSURL=new URL("../miller-columns.css",moduleURL).href;function escapeRegex(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}var index=async function(e,{namespace:t="miller",stylesheets:n=["@default"]}={}){let c;const a=`ul:not(.${t}-no-columns),ol:not(.${t}-no-columns)`,s="li";function i(){return e(`.${t}-column > .${t}-selected`)}function l(){const n=e(`.${t}-breadcrumbs`).empty();i().each(function(){const c=e(this);e(`<span class="${t}-breadcrumb">`).text(c.text().trim()).click(function(){c.click()}).appendTo(n)})}function o(t,n){let a=0;i().not(t).each(function(){a+=e(this).outerWidth(!0)}),n.stop().animate({scrollLeft:a},c.delay)}function r(){e(`.${t}-column:gt(0)`).addClass(`${t}-collapse`)}function d(){return i().last()}function u(e){f(e),function(e){o(null,e)}(e)}function f(e){r(),i().removeClass(`${t}-selected`),l(),c.current(null,e)}function h(){d().next().click()}function m(n){let c,a="";return function(i){const{key:l}=i;let o=!1;switch(l){case"Escape":u(n);break;case"ArrowUp":d().prev().click(),o=!0;break;case"ArrowDown":h(),o=!0;break;case"ArrowLeft":!function(){const e=d().data(`${t}-ancestor`);e&&e.click()}(),o=!0;break;case"ArrowRight":!function(){const e=d().data(`${t}-child`);e?e.children(s).first().click():h()}(),o=!0;break;default:if(1===l.length){!function(e){const t=new Date;!c||t-c<500?a+=e:a=e,c=t}(l),n.find(`li.${t}-selected`).last().siblings().filter(function(){return new RegExp("^"+escapeRegex(a),"i").test(e(this).text().trim())}).first().click()}o=!0}o&&0===d().length&&e(`.${t}-column`).first().children().first().click(),o&&i.preventDefault()}}n&&await loadStylesheets(n.map(e=>"@default"===e?defaultCSSURL:e)),e.fn.millerColumns=function(n){const i={current:e=>{},breadcrumb:l,animation:o,delay:500,resetOnOutsideClick:!0};return c=e.extend(i,n),this.each(function(){const n=e(this);!function(n){const c=[];let i;for(c.push(n.children());c.length;)(i=c.shift()).children(s).each(function(s,i){const l=e(this),o=l.children(a),r=l.parent().parent();r.length&&null==l.data(`${t}-ancestor`)&&e(this).siblings().addBack().data(`${t}-ancestor`,r),o.length&&(c.push(o),e(this).data(`${t}-child`,o).addClass(`${t}-parent`)),e(this).parent(a).appendTo(n).addClass(`${t}-column`)})}(n),r(),n.find(s).on("click",function(a){const s=e(this);f(n);const i=s.data(`${t}-child`);let l=s;for(i&&i.removeClass(`${t}-collapse`).children().removeClass(`${t}-selected`);l;)l.addClass(`${t}-selected`).parent().removeClass(`${t}-collapse`),l=l.data(`${t}-ancestor`);c.animation.call(this,s,n),c.breadcrumb.call(this),c.current.call(this,s,n),a.stopPropagation()}),n.on("keydown",m(n)),n.on("click",()=>{c.resetOnOutsideClick&&u(n)})})}};export default index;
